# Default values for apollo-helm.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

## Define serviceAccount names for components. Defaults to component's fully qualified name.
##
serviceAccounts:
  devadminservice:
    create: true
    name:
  fatadminservice:
    create: true
    name:
  uatadminservice:
    create: true
    name:
  proadminservice:
    create: true
    name:
  devconfigservice:
    create: true
    name:
  fatconfigservice:
    create: true
    name:
  uatconfigservice:
    create: true
    name:
  proconfigservice:
    create: true
    name:
  portal:
    create: true
    name:

devadminservice:
  ## If false, devadminservice will not be installed
  ##
  enabled: true
  name: devadminservice
  replicaCount: 1

  image:
    repository: qct222/apollo-adminservice
    tag: 1.2.0-SNAPSHOT
    pullPolicy: IfNotPresent

  ## Additional devadminservice container environment variable
  ## For instance to add a http_proxy
  ##
  extraEnv: {}

  ## devadminservice resource requests and limits
  ## Ref: http://kubernetes.io/docs/user-guide/compute-resources/
  ##
  resources: {}
    # limits:
    #   cpu: 10m
    #   memory: 32Mi
    # requests:
  #   cpu: 10m
  #   memory: 32Mi

  ## Node labels for pushgateway pod assignment
  ## Ref: https://kubernetes.io/docs/user-guide/node-selection/
  ##
  nodeSelector: {}

  ## Node tolerations for devadminservice scheduling to nodes with taints
  ## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/
  ##
  tolerations: []
    # - key: "key"
    #   operator: "Equal|Exists"
  #   value: "value"
  #   effect: "NoSchedule|PreferNoSchedule|NoExecute(1.6 only)"

  ## Pod affinity
  ##
  affinity: {}

  ## ConfigMap override where fullname is {{.Release.Name}}-{{.Values.server.configMapOverrideName}}
  ## Defining configMapOverrideName will cause templates/server-configmap.yaml
  ## to NOT generate a ConfigMap resource
  ##
  configMapOverrideName: ""
  configurationFiles: {}

  service:
    type: ClusterIP

    ## When using web.service.type: LoadBalancer, sets the user-specified load balancer IP
    # loadBalancerIP: 172.217.1.174

    #   ## When using web.service.type: LoadBalancer, enable HTTPS with an ACM cert
    #   service.beta.kubernetes.io/aws-load-balancer-ssl-cert: "arn:aws:acm:eu-west-1:123456789:certificate/abc123-abc123-abc123-abc123"
    #   service.beta.kubernetes.io/aws-load-balancer-backend-protocol: "http"
    #   service.beta.kubernetes.io/aws-load-balancer-backend-port: "atc"
    #   service.beta.kubernetes.io/aws-load-balancer-ssl-ports: "443"
    #
    # ## When using web.service.type: LoadBalancer, whitelist the load balancer to particular IPs
    # loadBalancerSourceRanges:
    #   - 192.168.1.10/32

    # nodePort: 30000
    # annotations:
    #   prometheus.io/probe: "true"
    #   prometheus.io/probe_path: "/"
    servicePort: 8090

fatadminservice:
  ## If false, fatadminservice will not be installed
  ##
  enabled: false
  name: fatadminservice
  replicaCount: 1

  image:
    repository: qct222/apollo-adminservice
    tag: 1.2.0-SNAPSHOT
    pullPolicy: IfNotPresent

  ## Additional fatadminservice container environment variable
  ## For instance to add a http_proxy
  ##
  extraEnv: {}

  ## fatadminservice resource requests and limits
  ## Ref: http://kubernetes.io/docs/user-guide/compute-resources/
  ##
  resources: {}
    # limits:
    #   cpu: 10m
    #   memory: 32Mi
  # requests:
  #   cpu: 10m
  #   memory: 32Mi

  ## Node labels for pushgateway pod assignment
  ## Ref: https://kubernetes.io/docs/user-guide/node-selection/
  ##
  nodeSelector: {}

  ## Node tolerations for fatadminservice scheduling to nodes with taints
  ## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/
  ##
  tolerations: []
    # - key: "key"
  #   operator: "Equal|Exists"
  #   value: "value"
  #   effect: "NoSchedule|PreferNoSchedule|NoExecute(1.6 only)"

  ## Pod affinity
  ##
  affinity: {}

  ## ConfigMap override where fullname is {{.Release.Name}}-{{.Values.server.configMapOverrideName}}
  ## Defining configMapOverrideName will cause templates/server-configmap.yaml
  ## to NOT generate a ConfigMap resource
  ##
  configMapOverrideName: ""
  configurationFiles: {}

  service:
    type: ClusterIP

    ## When using web.service.type: LoadBalancer, sets the user-specified load balancer IP
    # loadBalancerIP: 172.217.1.174

    #   ## When using web.service.type: LoadBalancer, enable HTTPS with an ACM cert
    #   service.beta.kubernetes.io/aws-load-balancer-ssl-cert: "arn:aws:acm:eu-west-1:123456789:certificate/abc123-abc123-abc123-abc123"
    #   service.beta.kubernetes.io/aws-load-balancer-backend-protocol: "http"
    #   service.beta.kubernetes.io/aws-load-balancer-backend-port: "atc"
    #   service.beta.kubernetes.io/aws-load-balancer-ssl-ports: "443"
    #
    # ## When using web.service.type: LoadBalancer, whitelist the load balancer to particular IPs
    # loadBalancerSourceRanges:
    #   - 192.168.1.10/32

    # nodePort: 30000
    # annotations:
    #   prometheus.io/probe: "true"
    #   prometheus.io/probe_path: "/"
    servicePort: 8090

uatadminservice:
  ## If false, uatadminservice will not be installed
  ##
  enabled: false
  name: uatadminservice
  replicaCount: 1

  image:
    repository: qct222/apollo-adminservice
    tag: 1.2.0-SNAPSHOT
    pullPolicy: IfNotPresent

  ## Additional uatadminservice container environment variable
  ## For instance to add a http_proxy
  ##
  extraEnv: {}

  ## uatadminservice resource requests and limits
  ## Ref: http://kubernetes.io/docs/user-guide/compute-resources/
  ##
  resources: {}
    # limits:
    #   cpu: 10m
    #   memory: 32Mi
  # requests:
  #   cpu: 10m
  #   memory: 32Mi

  ## Node labels for pushgateway pod assignment
  ## Ref: https://kubernetes.io/docs/user-guide/node-selection/
  ##
  nodeSelector: {}

  ## Node tolerations for uatadminservice scheduling to nodes with taints
  ## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/
  ##
  tolerations: []
    # - key: "key"
  #   operator: "Equal|Exists"
  #   value: "value"
  #   effect: "NoSchedule|PreferNoSchedule|NoExecute(1.6 only)"

  ## Pod affinity
  ##
  affinity: {}

  ## ConfigMap override where fullname is {{.Release.Name}}-{{.Values.server.configMapOverrideName}}
  ## Defining configMapOverrideName will cause templates/server-configmap.yaml
  ## to NOT generate a ConfigMap resource
  ##
  configMapOverrideName: ""
  configurationFiles: {}

  service:
    type: ClusterIP

    ## When using web.service.type: LoadBalancer, sets the user-specified load balancer IP
    # loadBalancerIP: 172.217.1.174

    #   ## When using web.service.type: LoadBalancer, enable HTTPS with an ACM cert
    #   service.beta.kubernetes.io/aws-load-balancer-ssl-cert: "arn:aws:acm:eu-west-1:123456789:certificate/abc123-abc123-abc123-abc123"
    #   service.beta.kubernetes.io/aws-load-balancer-backend-protocol: "http"
    #   service.beta.kubernetes.io/aws-load-balancer-backend-port: "atc"
    #   service.beta.kubernetes.io/aws-load-balancer-ssl-ports: "443"
    #
    # ## When using web.service.type: LoadBalancer, whitelist the load balancer to particular IPs
    # loadBalancerSourceRanges:
    #   - 192.168.1.10/32

    # nodePort: 30000
    # annotations:
    #   prometheus.io/probe: "true"
    #   prometheus.io/probe_path: "/"
    servicePort: 8090

proadminservice:
  ## If false, proadminservice will not be installed
  ##
  enabled: true
  name: proadminservice
  replicaCount: 1

  image:
    repository: qct222/apollo-adminservice
    tag: 1.2.0-SNAPSHOT
    pullPolicy: IfNotPresent

  ## Additional proadminservice container environment variable
  ## For instance to add a http_proxy
  ##
  extraEnv: {}

  ## proadminservice resource requests and limits
  ## Ref: http://kubernetes.io/docs/user-guide/compute-resources/
  ##
  resources: {}
    # limits:
    #   cpu: 10m
    #   memory: 32Mi
  # requests:
  #   cpu: 10m
  #   memory: 32Mi

  ## Node labels for pushgateway pod assignment
  ## Ref: https://kubernetes.io/docs/user-guide/node-selection/
  ##
  nodeSelector: {}

  ## Node tolerations for proadminservice scheduling to nodes with taints
  ## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/
  ##
  tolerations: []
    # - key: "key"
  #   operator: "Equal|Exists"
  #   value: "value"
  #   effect: "NoSchedule|PreferNoSchedule|NoExecute(1.6 only)"

  ## Pod affinity
  ##
  affinity: {}

  ## ConfigMap override where fullname is {{.Release.Name}}-{{.Values.server.configMapOverrideName}}
  ## Defining configMapOverrideName will cause templates/server-configmap.yaml
  ## to NOT generate a ConfigMap resource
  ##
  configMapOverrideName: ""
  configurationFiles: {}

  service:
    type: ClusterIP

    ## When using web.service.type: LoadBalancer, sets the user-specified load balancer IP
    # loadBalancerIP: 172.217.1.174

    #   ## When using web.service.type: LoadBalancer, enable HTTPS with an ACM cert
    #   service.beta.kubernetes.io/aws-load-balancer-ssl-cert: "arn:aws:acm:eu-west-1:123456789:certificate/abc123-abc123-abc123-abc123"
    #   service.beta.kubernetes.io/aws-load-balancer-backend-protocol: "http"
    #   service.beta.kubernetes.io/aws-load-balancer-backend-port: "atc"
    #   service.beta.kubernetes.io/aws-load-balancer-ssl-ports: "443"
    #
    # ## When using web.service.type: LoadBalancer, whitelist the load balancer to particular IPs
    # loadBalancerSourceRanges:
    #   - 192.168.1.10/32

    # nodePort: 30000
    # annotations:
    #   prometheus.io/probe: "true"
    #   prometheus.io/probe_path: "/"
    servicePort: 8090

devconfigservice:
  ## If false, devconfigservice will not be installed
  ##
  enabled: true
  name: devconfigservice
  replicaCount: 1

  image:
    repository: qct222/apollo-configservice
    tag: 1.2.0-SNAPSHOT
    pullPolicy: IfNotPresent

  ## Additional devconfigservice container environment variable
  ## For instance to add a http_proxy
  ##
  extraEnv: {}

  ## devconfigservice resource requests and limits
  ## Ref: http://kubernetes.io/docs/user-guide/compute-resources/
  ##
  resources: {}
    # limits:
    #   cpu: 10m
    #   memory: 32Mi
    # requests:
    #   cpu: 10m
  #   memory: 32Mi

  ## Node labels for pushgateway pod assignment
  ## Ref: https://kubernetes.io/docs/user-guide/node-selection/
  ##
  nodeSelector: {}

  ## Node tolerations for devconfigservice scheduling to nodes with taints
  ## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/
  ##
  tolerations: []
    # - key: "key"
    #   operator: "Equal|Exists"
    #   value: "value"
  #   effect: "NoSchedule|PreferNoSchedule|NoExecute(1.6 only)"

  ## Pod affinity
  ##
  affinity: {}

  ## ConfigMap override where fullname is {{.Release.Name}}-{{.Values.server.configMapOverrideName}}
  ## Defining configMapOverrideName will cause templates/server-configmap.yaml
  ## to NOT generate a ConfigMap resource
  ##
  configMapOverrideName: ""
  configurationFiles: {}

  service:
    type: ClusterIP

    ## When using web.service.type: LoadBalancer, sets the user-specified load balancer IP
    # loadBalancerIP: 172.217.1.174

    #   ## When using web.service.type: LoadBalancer, enable HTTPS with an ACM cert
    #   service.beta.kubernetes.io/aws-load-balancer-ssl-cert: "arn:aws:acm:eu-west-1:123456789:certificate/abc123-abc123-abc123-abc123"
    #   service.beta.kubernetes.io/aws-load-balancer-backend-protocol: "http"
    #   service.beta.kubernetes.io/aws-load-balancer-backend-port: "atc"
    #   service.beta.kubernetes.io/aws-load-balancer-ssl-ports: "443"
    #
    # ## When using web.service.type: LoadBalancer, whitelist the load balancer to particular IPs
    # loadBalancerSourceRanges:
    #   - 192.168.1.10/32

    # nodePort: 30000
    # annotations:
    #   prometheus.io/probe: "true"
    #   prometheus.io/probe_path: "/"
    servicePort: 8080

fatconfigservice:
  ## If false, fatconfigservice will not be installed
  ##
  enabled: false
  name: fatconfigservice
  replicaCount: 1

  image:
    repository: qct222/apollo-configservice
    tag: 1.2.0-SNAPSHOT
    pullPolicy: IfNotPresent

  ## Additional fatconfigservice container environment variable
  ## For instance to add a http_proxy
  ##
  extraEnv: {}

  ## fatconfigservice resource requests and limits
  ## Ref: http://kubernetes.io/docs/user-guide/compute-resources/
  ##
  resources: {}
    # limits:
    #   cpu: 10m
    #   memory: 32Mi
    # requests:
  #   cpu: 10m
  #   memory: 32Mi

  ## Node labels for pushgateway pod assignment
  ## Ref: https://kubernetes.io/docs/user-guide/node-selection/
  ##
  nodeSelector: {}

  ## Node tolerations for fatconfigservice scheduling to nodes with taints
  ## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/
  ##
  tolerations: []
    # - key: "key"
    #   operator: "Equal|Exists"
  #   value: "value"
  #   effect: "NoSchedule|PreferNoSchedule|NoExecute(1.6 only)"

  ## Pod affinity
  ##
  affinity: {}

  ## ConfigMap override where fullname is {{.Release.Name}}-{{.Values.server.configMapOverrideName}}
  ## Defining configMapOverrideName will cause templates/server-configmap.yaml
  ## to NOT generate a ConfigMap resource
  ##
  configMapOverrideName: ""
  configurationFiles: {}

  service:
    type: ClusterIP

    ## When using web.service.type: LoadBalancer, sets the user-specified load balancer IP
    # loadBalancerIP: 172.217.1.174

    #   ## When using web.service.type: LoadBalancer, enable HTTPS with an ACM cert
    #   service.beta.kubernetes.io/aws-load-balancer-ssl-cert: "arn:aws:acm:eu-west-1:123456789:certificate/abc123-abc123-abc123-abc123"
    #   service.beta.kubernetes.io/aws-load-balancer-backend-protocol: "http"
    #   service.beta.kubernetes.io/aws-load-balancer-backend-port: "atc"
    #   service.beta.kubernetes.io/aws-load-balancer-ssl-ports: "443"
    #
    # ## When using web.service.type: LoadBalancer, whitelist the load balancer to particular IPs
    # loadBalancerSourceRanges:
    #   - 192.168.1.10/32

    # nodePort: 30000
    # annotations:
    #   prometheus.io/probe: "true"
    #   prometheus.io/probe_path: "/"
    servicePort: 8080

uatconfigservice:
  ## If false, uatconfigservice will not be installed
  ##
  enabled: false
  name: uatconfigservice
  replicaCount: 1

  image:
    repository: qct222/apollo-configservice
    tag: 1.2.0-SNAPSHOT
    pullPolicy: IfNotPresent

  ## Additional uatconfigservice container environment variable
  ## For instance to add a http_proxy
  ##
  extraEnv: {}

  ## uatconfigservice resource requests and limits
  ## Ref: http://kubernetes.io/docs/user-guide/compute-resources/
  ##
  resources: {}
    # limits:
    #   cpu: 10m
    #   memory: 32Mi
    # requests:
  #   cpu: 10m
  #   memory: 32Mi

  ## Node labels for pushgateway pod assignment
  ## Ref: https://kubernetes.io/docs/user-guide/node-selection/
  ##
  nodeSelector: {}

  ## Node tolerations for uatconfigservice scheduling to nodes with taints
  ## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/
  ##
  tolerations: []
    # - key: "key"
    #   operator: "Equal|Exists"
  #   value: "value"
  #   effect: "NoSchedule|PreferNoSchedule|NoExecute(1.6 only)"

  ## Pod affinity
  ##
  affinity: {}

  ## ConfigMap override where fullname is {{.Release.Name}}-{{.Values.server.configMapOverrideName}}
  ## Defining configMapOverrideName will cause templates/server-configmap.yaml
  ## to NOT generate a ConfigMap resource
  ##
  configMapOverrideName: ""
  configurationFiles: {}

  service:
    type: ClusterIP

    ## When using web.service.type: LoadBalancer, sets the user-specified load balancer IP
    # loadBalancerIP: 172.217.1.174

    #   ## When using web.service.type: LoadBalancer, enable HTTPS with an ACM cert
    #   service.beta.kubernetes.io/aws-load-balancer-ssl-cert: "arn:aws:acm:eu-west-1:123456789:certificate/abc123-abc123-abc123-abc123"
    #   service.beta.kubernetes.io/aws-load-balancer-backend-protocol: "http"
    #   service.beta.kubernetes.io/aws-load-balancer-backend-port: "atc"
    #   service.beta.kubernetes.io/aws-load-balancer-ssl-ports: "443"
    #
    # ## When using web.service.type: LoadBalancer, whitelist the load balancer to particular IPs
    # loadBalancerSourceRanges:
    #   - 192.168.1.10/32

    # nodePort: 30000
    # annotations:
    #   prometheus.io/probe: "true"
    #   prometheus.io/probe_path: "/"
    servicePort: 8080

proconfigservice:
  ## If false, proconfigservice will not be installed
  ##
  enabled: true
  name: proconfigservice
  replicaCount: 1

  image:
    repository: qct222/apollo-configservice
    tag: 1.2.0-SNAPSHOT
    pullPolicy: IfNotPresent

  ## Additional proconfigservice container environment variable
  ## For instance to add a http_proxy
  ##
  extraEnv: {}

  ## proconfigservice resource requests and limits
  ## Ref: http://kubernetes.io/docs/user-guide/compute-resources/
  ##
  resources: {}
    # limits:
    #   cpu: 10m
    #   memory: 32Mi
    # requests:
  #   cpu: 10m
  #   memory: 32Mi

  ## Node labels for pushgateway pod assignment
  ## Ref: https://kubernetes.io/docs/user-guide/node-selection/
  ##
  nodeSelector: {}

  ## Node tolerations for proconfigservice scheduling to nodes with taints
  ## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/
  ##
  tolerations: []
    # - key: "key"
    #   operator: "Equal|Exists"
  #   value: "value"
  #   effect: "NoSchedule|PreferNoSchedule|NoExecute(1.6 only)"

  ## Pod affinity
  ##
  affinity: {}

  ## ConfigMap override where fullname is {{.Release.Name}}-{{.Values.server.configMapOverrideName}}
  ## Defining configMapOverrideName will cause templates/server-configmap.yaml
  ## to NOT generate a ConfigMap resource
  ##
  configMapOverrideName: ""
  configurationFiles: {}

  service:
    type: ClusterIP

    ## When using web.service.type: LoadBalancer, sets the user-specified load balancer IP
    # loadBalancerIP: 172.217.1.174

    #   ## When using web.service.type: LoadBalancer, enable HTTPS with an ACM cert
    #   service.beta.kubernetes.io/aws-load-balancer-ssl-cert: "arn:aws:acm:eu-west-1:123456789:certificate/abc123-abc123-abc123-abc123"
    #   service.beta.kubernetes.io/aws-load-balancer-backend-protocol: "http"
    #   service.beta.kubernetes.io/aws-load-balancer-backend-port: "atc"
    #   service.beta.kubernetes.io/aws-load-balancer-ssl-ports: "443"
    #
    # ## When using web.service.type: LoadBalancer, whitelist the load balancer to particular IPs
    # loadBalancerSourceRanges:
    #   - 192.168.1.10/32

    # nodePort: 30000
    # annotations:
    #   prometheus.io/probe: "true"
    #   prometheus.io/probe_path: "/"
    servicePort: 8080

portal:
  ## If false, portal will not be installed
  ##
  enabled: true
  name: portal
  replicaCount: 1
  image:
    repository: qct222/apollo-portal
    tag: 1.2.0-SNAPSHOT
    pullPolicy: IfNotPresent

  ## Additional portal container environment variable
  ## For instance to add a http_proxy
  ##
  extraEnv:
    spring.profiles.active: "auth"

  ## portal resource requests and limits
  ## Ref: http://kubernetes.io/docs/user-guide/compute-resources/
  ##
  resources: {}
    # limits:
    #   cpu: 10m
    #   memory: 32Mi
    # requests:
    #   cpu: 10m
    #   memory: 32Mi

  ## Node labels for pushgateway pod assignment
  ## Ref: https://kubernetes.io/docs/user-guide/node-selection/
  ##
  nodeSelector: {}

  ## Node tolerations for portal scheduling to nodes with taints
  ## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/
  ##
  tolerations: []
    # - key: "key"
    #   operator: "Equal|Exists"
    #   value: "value"
    #   effect: "NoSchedule|PreferNoSchedule|NoExecute(1.6 only)"

  ## Pod affinity
  ##
  affinity: {}

  ## ConfigMap override where fullname is {{.Release.Name}}-{{.Values.server.configMapOverrideName}}
  ## Defining configMapOverrideName will cause templates/server-configmap.yaml
  ## to NOT generate a ConfigMap resource
  ##
  configMapOverrideName: ""
  configurationFiles: {}

  service:
    type: ClusterIP

    ## When using web.service.type: LoadBalancer, sets the user-specified load balancer IP
    # loadBalancerIP: 172.217.1.174

    #   ## When using web.service.type: LoadBalancer, enable HTTPS with an ACM cert
    #   service.beta.kubernetes.io/aws-load-balancer-ssl-cert: "arn:aws:acm:eu-west-1:123456789:certificate/abc123-abc123-abc123-abc123"
    #   service.beta.kubernetes.io/aws-load-balancer-backend-protocol: "http"
    #   service.beta.kubernetes.io/aws-load-balancer-backend-port: "atc"
    #   service.beta.kubernetes.io/aws-load-balancer-ssl-ports: "443"
    #
    # ## When using web.service.type: LoadBalancer, whitelist the load balancer to particular IPs
    # loadBalancerSourceRanges:
    #   - 192.168.1.10/32

    # nodePort: 30000
    # annotations:
    #   prometheus.io/probe: "true"
    #   prometheus.io/probe_path: "/"
    servicePort: 8070

  ingress:
    enabled: false
    ## Portal server Ingress annotations
    ##
    annotations: {}

    ## Portal server Ingress hostnames with optional path
    ## Must be provided if Ingress is enabled
    ##
    hosts: []
    #   - apollo-portal.domain.com
    #   - domain.com/apollo-portal

    ## Portal Ingress TLS configuration
    ## Secrets must be manually created in the namespace
    ##
    tls: []
    #   - secretName: portal-server-tls
    #     hosts:
    #       - apollo-portal.domain.com

devconfigservicemysql:
  enabled: true
  mysqlUser: "admin"
  mysqlPassword: "admin"
  # mysqlUser: "root"
  # mysqlPassword: "123456"
  mysqlRootPassword: "123456"
  mysqlDatabase: "ApolloConfigDB"
  ## Persist data to a persistent volume
  persistence:
    ## database data Persistent Volume Storage Class
    ## If defined, storageClassName: <storageClass>
    ## If set to "-", storageClassName: "", which disables dynamic provisioning
    ## If undefined (the default) or set to null, no storageClassName spec is
    ##   set, choosing the default provisioner.  (gp2 on AWS, standard on
    ##   GKE, AWS & OpenStack)
    ##
    # storageClass: "-"
    accessMode: ReadWriteOnce
    size: 2Gi
    annotations: {}
  initializationFiles:
    initializationFiles-configservice.sql: |-
      /*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
      /*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
      /*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
      /*!40101 SET NAMES utf8 */;
      /*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
      /*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
      /*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

      # Create Database
      # ------------------------------------------------------------
      CREATE DATABASE IF NOT EXISTS ApolloConfigDB DEFAULT CHARACTER SET = utf8mb4;

      Use ApolloConfigDB;

      # Dump of table app
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `App`;

      CREATE TABLE `App` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
        `AppId` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `Name` varchar(500) NOT NULL DEFAULT 'default' COMMENT '应用名',
        `OrgId` varchar(32) NOT NULL DEFAULT 'default' COMMENT '部门Id',
        `OrgName` varchar(64) NOT NULL DEFAULT 'default' COMMENT '部门名字',
        `OwnerName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'ownerName',
        `OwnerEmail` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'ownerEmail',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `AppId` (`AppId`(191)),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_Name` (`Name`(191))
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='应用表';



      # Dump of table appnamespace
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `AppNamespace`;

      CREATE TABLE `AppNamespace` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增主键',
        `Name` varchar(32) NOT NULL DEFAULT '' COMMENT 'namespace名字，注意，需要全局唯一',
        `AppId` varchar(32) NOT NULL DEFAULT '' COMMENT 'app id',
        `Format` varchar(32) NOT NULL DEFAULT 'properties' COMMENT 'namespace的format类型',
        `IsPublic` bit(1) NOT NULL DEFAULT b'0' COMMENT 'namespace是否为公共',
        `Comment` varchar(64) NOT NULL DEFAULT '' COMMENT '注释',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT '' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_AppId` (`AppId`),
        KEY `Name_AppId` (`Name`,`AppId`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='应用namespace定义';



      # Dump of table audit
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Audit`;

      CREATE TABLE `Audit` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
        `EntityName` varchar(50) NOT NULL DEFAULT 'default' COMMENT '表名',
        `EntityId` int(10) unsigned DEFAULT NULL COMMENT '记录ID',
        `OpName` varchar(50) NOT NULL DEFAULT 'default' COMMENT '操作类型',
        `Comment` varchar(500) DEFAULT NULL COMMENT '备注',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='日志审计表';



      # Dump of table cluster
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Cluster`;

      CREATE TABLE `Cluster` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增主键',
        `Name` varchar(32) NOT NULL DEFAULT '' COMMENT '集群名字',
        `AppId` varchar(32) NOT NULL DEFAULT '' COMMENT 'App id',
        `ParentClusterId` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '父cluster',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT '' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_AppId_Name` (`AppId`,`Name`),
        KEY `IX_ParentClusterId` (`ParentClusterId`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='集群';



      # Dump of table commit
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Commit`;

      CREATE TABLE `Commit` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
        `ChangeSets` longtext NOT NULL COMMENT '修改变更集',
        `AppId` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'ClusterName',
        `NamespaceName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'namespaceName',
        `Comment` varchar(500) DEFAULT NULL COMMENT '备注',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `AppId` (`AppId`(191)),
        KEY `ClusterName` (`ClusterName`(191)),
        KEY `NamespaceName` (`NamespaceName`(191))
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='commit 历史表';

      # Dump of table grayreleaserule
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `GrayReleaseRule`;

      CREATE TABLE `GrayReleaseRule` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
        `AppId` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'Cluster Name',
        `NamespaceName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'Namespace Name',
        `BranchName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'branch name',
        `Rules` varchar(16000) DEFAULT '[]' COMMENT '灰度规则',
        `ReleaseId` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '灰度对应的release',
        `BranchStatus` tinyint(2) DEFAULT '1' COMMENT '灰度分支状态: 0:删除分支,1:正在使用的规则 2：全量发布',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_Namespace` (`AppId`,`ClusterName`,`NamespaceName`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='灰度规则表';


      # Dump of table instance
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Instance`;

      CREATE TABLE `Instance` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `AppId` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'ClusterName',
        `DataCenter` varchar(64) NOT NULL DEFAULT 'default' COMMENT 'Data Center Name',
        `Ip` varchar(32) NOT NULL DEFAULT '' COMMENT 'instance ip',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        UNIQUE KEY `IX_UNIQUE_KEY` (`AppId`,`ClusterName`,`Ip`,`DataCenter`),
        KEY `IX_IP` (`Ip`),
        KEY `IX_DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='使用配置的应用实例';



      # Dump of table instanceconfig
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `InstanceConfig`;

      CREATE TABLE `InstanceConfig` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `InstanceId` int(11) unsigned DEFAULT NULL COMMENT 'Instance Id',
        `ConfigAppId` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'Config App Id',
        `ConfigClusterName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'Config Cluster Name',
        `ConfigNamespaceName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'Config Namespace Name',
        `ReleaseKey` varchar(64) NOT NULL DEFAULT '' COMMENT '发布的Key',
        `ReleaseDeliveryTime` timestamp NULL DEFAULT NULL COMMENT '配置获取时间',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        UNIQUE KEY `IX_UNIQUE_KEY` (`InstanceId`,`ConfigAppId`,`ConfigNamespaceName`),
        KEY `IX_ReleaseKey` (`ReleaseKey`),
        KEY `IX_DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_Valid_Namespace` (`ConfigAppId`,`ConfigClusterName`,`ConfigNamespaceName`,`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='应用实例的配置信息';



      # Dump of table item
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Item`;

      CREATE TABLE `Item` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `NamespaceId` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '集群NamespaceId',
        `Key` varchar(128) NOT NULL DEFAULT 'default' COMMENT '配置项Key',
        `Value` longtext NOT NULL COMMENT '配置项值',
        `Comment` varchar(1024) DEFAULT '' COMMENT '注释',
        `LineNum` int(10) unsigned DEFAULT '0' COMMENT '行号',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_GroupId` (`NamespaceId`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='配置项目';



      # Dump of table namespace
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Namespace`;

      CREATE TABLE `Namespace` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增主键',
        `AppId` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'Cluster Name',
        `NamespaceName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'Namespace Name',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `AppId_ClusterName_NamespaceName` (`AppId`(191),`ClusterName`(191),`NamespaceName`(191)),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_NamespaceName` (`NamespaceName`(191))
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='命名空间';



      # Dump of table namespacelock
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `NamespaceLock`;

      CREATE TABLE `NamespaceLock` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增id',
        `NamespaceId` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '集群NamespaceId',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT 'default' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        `IsDeleted` bit(1) DEFAULT b'0' COMMENT '软删除',
        PRIMARY KEY (`Id`),
        UNIQUE KEY `IX_NamespaceId` (`NamespaceId`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='namespace的编辑锁';



      # Dump of table release
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Release`;

      CREATE TABLE `Release` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增主键',
        `ReleaseKey` varchar(64) NOT NULL DEFAULT '' COMMENT '发布的Key',
        `Name` varchar(64) NOT NULL DEFAULT 'default' COMMENT '发布名字',
        `Comment` varchar(256) DEFAULT NULL COMMENT '发布说明',
        `AppId` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'ClusterName',
        `NamespaceName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'namespaceName',
        `Configurations` longtext NOT NULL COMMENT '发布配置',
        `IsAbandoned` bit(1) NOT NULL DEFAULT b'0' COMMENT '是否废弃',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `AppId_ClusterName_GroupName` (`AppId`(191),`ClusterName`(191),`NamespaceName`(191)),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_ReleaseKey` (`ReleaseKey`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='发布';


      # Dump of table releasehistory
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `ReleaseHistory`;

      CREATE TABLE `ReleaseHistory` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `AppId` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'ClusterName',
        `NamespaceName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'namespaceName',
        `BranchName` varchar(32) NOT NULL DEFAULT 'default' COMMENT '发布分支名',
        `ReleaseId` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '关联的Release Id',
        `PreviousReleaseId` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '前一次发布的ReleaseId',
        `Operation` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT '发布类型，0: 普通发布，1: 回滚，2: 灰度发布，3: 灰度规则更新，4: 灰度合并回主分支发布，5: 主分支发布灰度自动发布，6: 主分支回滚灰度自动发布，7: 放弃灰度',
        `OperationContext` longtext NOT NULL COMMENT '发布上下文信息',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_Namespace` (`AppId`,`ClusterName`,`NamespaceName`,`BranchName`),
        KEY `IX_ReleaseId` (`ReleaseId`),
        KEY `IX_DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='发布历史';


      # Dump of table releasemessage
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `ReleaseMessage`;

      CREATE TABLE `ReleaseMessage` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增主键',
        `Message` varchar(1024) NOT NULL DEFAULT '' COMMENT '发布的消息内容',
        `DataChange_LastTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_Message` (`Message`(191))
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='发布消息';



      # Dump of table serverconfig
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `ServerConfig`;

      CREATE TABLE `ServerConfig` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `Key` varchar(64) NOT NULL DEFAULT 'default' COMMENT '配置项Key',
        `Cluster` varchar(32) NOT NULL DEFAULT 'default' COMMENT '配置对应的集群，default为不针对特定的集群',
        `Value` varchar(2048) NOT NULL DEFAULT 'default' COMMENT '配置项值',
        `Comment` varchar(1024) DEFAULT '' COMMENT '注释',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_Key` (`Key`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='配置服务自身配置';

      # Config
      # ------------------------------------------------------------
      INSERT INTO `ServerConfig` (`Key`, `Cluster`, `Value`, `Comment`)      VALUES          ('eureka.service.url', 'default', 'http://apollo-devconfigservice:8080/eureka/', 'Eureka服务Url，多个service以英文逗号分隔'),
          ('namespace.lock.switch', 'default', 'false', '一次发布只能有一个人修改开关'),
          ('item.key.length.limit', 'default', '128', 'item key 最大长度限制'),
          ('item.value.length.limit', 'default', '20000', 'item value最大长度限制'),
          ('config-service.cache.enabled', 'default', 'false', 'ConfigService是否开启缓存，开启后能提高性能，但是会增大内存消耗！');

      /*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;
      /*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
      /*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
      /*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
      /*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
      /*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;



fatconfigservicemysql:
  enabled: false
  mysqlUser: "admin"
  mysqlPassword: "admin"
  # mysqlUser: "root"
  # mysqlPassword: "123456"
  mysqlRootPassword: "123456"
  mysqlDatabase: "ApolloConfigDB"
  ## Persist data to a persistent volume
  persistence:
    ## database data Persistent Volume Storage Class
    ## If defined, storageClassName: <storageClass>
    ## If set to "-", storageClassName: "", which disables dynamic provisioning
    ## If undefined (the default) or set to null, no storageClassName spec is
    ##   set, choosing the default provisioner.  (gp2 on AWS, standard on
    ##   GKE, AWS & OpenStack)
    ##
    # storageClass: "-"
    accessMode: ReadWriteOnce
    size: 2Gi
    annotations: {}
  initializationFiles:
    initializationFiles-configservice.sql: |-
      /*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
      /*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
      /*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
      /*!40101 SET NAMES utf8 */;
      /*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
      /*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
      /*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

      # Create Database
      # ------------------------------------------------------------
      CREATE DATABASE IF NOT EXISTS ApolloConfigDB DEFAULT CHARACTER SET = utf8mb4;

      Use ApolloConfigDB;

      # Dump of table app
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `App`;

      CREATE TABLE `App` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
        `AppId` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `Name` varchar(500) NOT NULL DEFAULT 'default' COMMENT '应用名',
        `OrgId` varchar(32) NOT NULL DEFAULT 'default' COMMENT '部门Id',
        `OrgName` varchar(64) NOT NULL DEFAULT 'default' COMMENT '部门名字',
        `OwnerName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'ownerName',
        `OwnerEmail` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'ownerEmail',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `AppId` (`AppId`(191)),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_Name` (`Name`(191))
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='应用表';



      # Dump of table appnamespace
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `AppNamespace`;

      CREATE TABLE `AppNamespace` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增主键',
        `Name` varchar(32) NOT NULL DEFAULT '' COMMENT 'namespace名字，注意，需要全局唯一',
        `AppId` varchar(32) NOT NULL DEFAULT '' COMMENT 'app id',
        `Format` varchar(32) NOT NULL DEFAULT 'properties' COMMENT 'namespace的format类型',
        `IsPublic` bit(1) NOT NULL DEFAULT b'0' COMMENT 'namespace是否为公共',
        `Comment` varchar(64) NOT NULL DEFAULT '' COMMENT '注释',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT '' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_AppId` (`AppId`),
        KEY `Name_AppId` (`Name`,`AppId`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='应用namespace定义';



      # Dump of table audit
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Audit`;

      CREATE TABLE `Audit` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
        `EntityName` varchar(50) NOT NULL DEFAULT 'default' COMMENT '表名',
        `EntityId` int(10) unsigned DEFAULT NULL COMMENT '记录ID',
        `OpName` varchar(50) NOT NULL DEFAULT 'default' COMMENT '操作类型',
        `Comment` varchar(500) DEFAULT NULL COMMENT '备注',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='日志审计表';



      # Dump of table cluster
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Cluster`;

      CREATE TABLE `Cluster` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增主键',
        `Name` varchar(32) NOT NULL DEFAULT '' COMMENT '集群名字',
        `AppId` varchar(32) NOT NULL DEFAULT '' COMMENT 'App id',
        `ParentClusterId` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '父cluster',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT '' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_AppId_Name` (`AppId`,`Name`),
        KEY `IX_ParentClusterId` (`ParentClusterId`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='集群';



      # Dump of table commit
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Commit`;

      CREATE TABLE `Commit` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
        `ChangeSets` longtext NOT NULL COMMENT '修改变更集',
        `AppId` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'ClusterName',
        `NamespaceName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'namespaceName',
        `Comment` varchar(500) DEFAULT NULL COMMENT '备注',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `AppId` (`AppId`(191)),
        KEY `ClusterName` (`ClusterName`(191)),
        KEY `NamespaceName` (`NamespaceName`(191))
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='commit 历史表';

      # Dump of table grayreleaserule
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `GrayReleaseRule`;

      CREATE TABLE `GrayReleaseRule` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
        `AppId` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'Cluster Name',
        `NamespaceName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'Namespace Name',
        `BranchName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'branch name',
        `Rules` varchar(16000) DEFAULT '[]' COMMENT '灰度规则',
        `ReleaseId` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '灰度对应的release',
        `BranchStatus` tinyint(2) DEFAULT '1' COMMENT '灰度分支状态: 0:删除分支,1:正在使用的规则 2：全量发布',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_Namespace` (`AppId`,`ClusterName`,`NamespaceName`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='灰度规则表';


      # Dump of table instance
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Instance`;

      CREATE TABLE `Instance` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `AppId` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'ClusterName',
        `DataCenter` varchar(64) NOT NULL DEFAULT 'default' COMMENT 'Data Center Name',
        `Ip` varchar(32) NOT NULL DEFAULT '' COMMENT 'instance ip',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        UNIQUE KEY `IX_UNIQUE_KEY` (`AppId`,`ClusterName`,`Ip`,`DataCenter`),
        KEY `IX_IP` (`Ip`),
        KEY `IX_DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='使用配置的应用实例';



      # Dump of table instanceconfig
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `InstanceConfig`;

      CREATE TABLE `InstanceConfig` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `InstanceId` int(11) unsigned DEFAULT NULL COMMENT 'Instance Id',
        `ConfigAppId` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'Config App Id',
        `ConfigClusterName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'Config Cluster Name',
        `ConfigNamespaceName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'Config Namespace Name',
        `ReleaseKey` varchar(64) NOT NULL DEFAULT '' COMMENT '发布的Key',
        `ReleaseDeliveryTime` timestamp NULL DEFAULT NULL COMMENT '配置获取时间',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        UNIQUE KEY `IX_UNIQUE_KEY` (`InstanceId`,`ConfigAppId`,`ConfigNamespaceName`),
        KEY `IX_ReleaseKey` (`ReleaseKey`),
        KEY `IX_DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_Valid_Namespace` (`ConfigAppId`,`ConfigClusterName`,`ConfigNamespaceName`,`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='应用实例的配置信息';



      # Dump of table item
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Item`;

      CREATE TABLE `Item` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `NamespaceId` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '集群NamespaceId',
        `Key` varchar(128) NOT NULL DEFAULT 'default' COMMENT '配置项Key',
        `Value` longtext NOT NULL COMMENT '配置项值',
        `Comment` varchar(1024) DEFAULT '' COMMENT '注释',
        `LineNum` int(10) unsigned DEFAULT '0' COMMENT '行号',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_GroupId` (`NamespaceId`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='配置项目';



      # Dump of table namespace
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Namespace`;

      CREATE TABLE `Namespace` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增主键',
        `AppId` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'Cluster Name',
        `NamespaceName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'Namespace Name',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `AppId_ClusterName_NamespaceName` (`AppId`(191),`ClusterName`(191),`NamespaceName`(191)),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_NamespaceName` (`NamespaceName`(191))
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='命名空间';



      # Dump of table namespacelock
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `NamespaceLock`;

      CREATE TABLE `NamespaceLock` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增id',
        `NamespaceId` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '集群NamespaceId',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT 'default' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        `IsDeleted` bit(1) DEFAULT b'0' COMMENT '软删除',
        PRIMARY KEY (`Id`),
        UNIQUE KEY `IX_NamespaceId` (`NamespaceId`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='namespace的编辑锁';



      # Dump of table release
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Release`;

      CREATE TABLE `Release` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增主键',
        `ReleaseKey` varchar(64) NOT NULL DEFAULT '' COMMENT '发布的Key',
        `Name` varchar(64) NOT NULL DEFAULT 'default' COMMENT '发布名字',
        `Comment` varchar(256) DEFAULT NULL COMMENT '发布说明',
        `AppId` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'ClusterName',
        `NamespaceName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'namespaceName',
        `Configurations` longtext NOT NULL COMMENT '发布配置',
        `IsAbandoned` bit(1) NOT NULL DEFAULT b'0' COMMENT '是否废弃',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `AppId_ClusterName_GroupName` (`AppId`(191),`ClusterName`(191),`NamespaceName`(191)),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_ReleaseKey` (`ReleaseKey`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='发布';


      # Dump of table releasehistory
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `ReleaseHistory`;

      CREATE TABLE `ReleaseHistory` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `AppId` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'ClusterName',
        `NamespaceName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'namespaceName',
        `BranchName` varchar(32) NOT NULL DEFAULT 'default' COMMENT '发布分支名',
        `ReleaseId` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '关联的Release Id',
        `PreviousReleaseId` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '前一次发布的ReleaseId',
        `Operation` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT '发布类型，0: 普通发布，1: 回滚，2: 灰度发布，3: 灰度规则更新，4: 灰度合并回主分支发布，5: 主分支发布灰度自动发布，6: 主分支回滚灰度自动发布，7: 放弃灰度',
        `OperationContext` longtext NOT NULL COMMENT '发布上下文信息',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_Namespace` (`AppId`,`ClusterName`,`NamespaceName`,`BranchName`),
        KEY `IX_ReleaseId` (`ReleaseId`),
        KEY `IX_DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='发布历史';


      # Dump of table releasemessage
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `ReleaseMessage`;

      CREATE TABLE `ReleaseMessage` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增主键',
        `Message` varchar(1024) NOT NULL DEFAULT '' COMMENT '发布的消息内容',
        `DataChange_LastTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_Message` (`Message`(191))
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='发布消息';



      # Dump of table serverconfig
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `ServerConfig`;

      CREATE TABLE `ServerConfig` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `Key` varchar(64) NOT NULL DEFAULT 'default' COMMENT '配置项Key',
        `Cluster` varchar(32) NOT NULL DEFAULT 'default' COMMENT '配置对应的集群，default为不针对特定的集群',
        `Value` varchar(2048) NOT NULL DEFAULT 'default' COMMENT '配置项值',
        `Comment` varchar(1024) DEFAULT '' COMMENT '注释',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_Key` (`Key`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='配置服务自身配置';

      # Config
      # ------------------------------------------------------------
      INSERT INTO `ServerConfig` (`Key`, `Cluster`, `Value`, `Comment`)      VALUES          ('eureka.service.url', 'default', 'http://apollo-fatconfigservice:8080/eureka/', 'Eureka服务Url，多个service以英文逗号分隔'),
          ('namespace.lock.switch', 'default', 'false', '一次发布只能有一个人修改开关'),
          ('item.key.length.limit', 'default', '128', 'item key 最大长度限制'),
          ('item.value.length.limit', 'default', '20000', 'item value最大长度限制'),
          ('config-service.cache.enabled', 'default', 'false', 'ConfigService是否开启缓存，开启后能提高性能，但是会增大内存消耗！');

      /*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;
      /*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
      /*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
      /*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
      /*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
      /*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;



uatconfigservicemysql:
  enabled: false
  mysqlUser: "admin"
  mysqlPassword: "admin"
  # mysqlUser: "root"
  # mysqlPassword: "123456"
  mysqlRootPassword: "123456"
  mysqlDatabase: "ApolloConfigDB"
  ## Persist data to a persistent volume
  persistence:
    ## database data Persistent Volume Storage Class
    ## If defined, storageClassName: <storageClass>
    ## If set to "-", storageClassName: "", which disables dynamic provisioning
    ## If undefined (the default) or set to null, no storageClassName spec is
    ##   set, choosing the default provisioner.  (gp2 on AWS, standard on
    ##   GKE, AWS & OpenStack)
    ##
    # storageClass: "-"
    accessMode: ReadWriteOnce
    size: 2Gi
    annotations: {}
  initializationFiles:
    initializationFiles-configservice.sql: |-
      /*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
      /*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
      /*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
      /*!40101 SET NAMES utf8 */;
      /*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
      /*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
      /*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

      # Create Database
      # ------------------------------------------------------------
      CREATE DATABASE IF NOT EXISTS ApolloConfigDB DEFAULT CHARACTER SET = utf8mb4;

      Use ApolloConfigDB;

      # Dump of table app
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `App`;

      CREATE TABLE `App` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
        `AppId` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `Name` varchar(500) NOT NULL DEFAULT 'default' COMMENT '应用名',
        `OrgId` varchar(32) NOT NULL DEFAULT 'default' COMMENT '部门Id',
        `OrgName` varchar(64) NOT NULL DEFAULT 'default' COMMENT '部门名字',
        `OwnerName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'ownerName',
        `OwnerEmail` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'ownerEmail',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `AppId` (`AppId`(191)),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_Name` (`Name`(191))
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='应用表';



      # Dump of table appnamespace
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `AppNamespace`;

      CREATE TABLE `AppNamespace` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增主键',
        `Name` varchar(32) NOT NULL DEFAULT '' COMMENT 'namespace名字，注意，需要全局唯一',
        `AppId` varchar(32) NOT NULL DEFAULT '' COMMENT 'app id',
        `Format` varchar(32) NOT NULL DEFAULT 'properties' COMMENT 'namespace的format类型',
        `IsPublic` bit(1) NOT NULL DEFAULT b'0' COMMENT 'namespace是否为公共',
        `Comment` varchar(64) NOT NULL DEFAULT '' COMMENT '注释',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT '' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_AppId` (`AppId`),
        KEY `Name_AppId` (`Name`,`AppId`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='应用namespace定义';



      # Dump of table audit
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Audit`;

      CREATE TABLE `Audit` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
        `EntityName` varchar(50) NOT NULL DEFAULT 'default' COMMENT '表名',
        `EntityId` int(10) unsigned DEFAULT NULL COMMENT '记录ID',
        `OpName` varchar(50) NOT NULL DEFAULT 'default' COMMENT '操作类型',
        `Comment` varchar(500) DEFAULT NULL COMMENT '备注',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='日志审计表';



      # Dump of table cluster
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Cluster`;

      CREATE TABLE `Cluster` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增主键',
        `Name` varchar(32) NOT NULL DEFAULT '' COMMENT '集群名字',
        `AppId` varchar(32) NOT NULL DEFAULT '' COMMENT 'App id',
        `ParentClusterId` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '父cluster',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT '' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_AppId_Name` (`AppId`,`Name`),
        KEY `IX_ParentClusterId` (`ParentClusterId`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='集群';



      # Dump of table commit
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Commit`;

      CREATE TABLE `Commit` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
        `ChangeSets` longtext NOT NULL COMMENT '修改变更集',
        `AppId` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'ClusterName',
        `NamespaceName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'namespaceName',
        `Comment` varchar(500) DEFAULT NULL COMMENT '备注',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `AppId` (`AppId`(191)),
        KEY `ClusterName` (`ClusterName`(191)),
        KEY `NamespaceName` (`NamespaceName`(191))
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='commit 历史表';

      # Dump of table grayreleaserule
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `GrayReleaseRule`;

      CREATE TABLE `GrayReleaseRule` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
        `AppId` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'Cluster Name',
        `NamespaceName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'Namespace Name',
        `BranchName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'branch name',
        `Rules` varchar(16000) DEFAULT '[]' COMMENT '灰度规则',
        `ReleaseId` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '灰度对应的release',
        `BranchStatus` tinyint(2) DEFAULT '1' COMMENT '灰度分支状态: 0:删除分支,1:正在使用的规则 2：全量发布',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_Namespace` (`AppId`,`ClusterName`,`NamespaceName`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='灰度规则表';


      # Dump of table instance
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Instance`;

      CREATE TABLE `Instance` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `AppId` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'ClusterName',
        `DataCenter` varchar(64) NOT NULL DEFAULT 'default' COMMENT 'Data Center Name',
        `Ip` varchar(32) NOT NULL DEFAULT '' COMMENT 'instance ip',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        UNIQUE KEY `IX_UNIQUE_KEY` (`AppId`,`ClusterName`,`Ip`,`DataCenter`),
        KEY `IX_IP` (`Ip`),
        KEY `IX_DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='使用配置的应用实例';



      # Dump of table instanceconfig
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `InstanceConfig`;

      CREATE TABLE `InstanceConfig` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `InstanceId` int(11) unsigned DEFAULT NULL COMMENT 'Instance Id',
        `ConfigAppId` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'Config App Id',
        `ConfigClusterName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'Config Cluster Name',
        `ConfigNamespaceName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'Config Namespace Name',
        `ReleaseKey` varchar(64) NOT NULL DEFAULT '' COMMENT '发布的Key',
        `ReleaseDeliveryTime` timestamp NULL DEFAULT NULL COMMENT '配置获取时间',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        UNIQUE KEY `IX_UNIQUE_KEY` (`InstanceId`,`ConfigAppId`,`ConfigNamespaceName`),
        KEY `IX_ReleaseKey` (`ReleaseKey`),
        KEY `IX_DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_Valid_Namespace` (`ConfigAppId`,`ConfigClusterName`,`ConfigNamespaceName`,`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='应用实例的配置信息';



      # Dump of table item
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Item`;

      CREATE TABLE `Item` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `NamespaceId` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '集群NamespaceId',
        `Key` varchar(128) NOT NULL DEFAULT 'default' COMMENT '配置项Key',
        `Value` longtext NOT NULL COMMENT '配置项值',
        `Comment` varchar(1024) DEFAULT '' COMMENT '注释',
        `LineNum` int(10) unsigned DEFAULT '0' COMMENT '行号',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_GroupId` (`NamespaceId`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='配置项目';



      # Dump of table namespace
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Namespace`;

      CREATE TABLE `Namespace` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增主键',
        `AppId` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'Cluster Name',
        `NamespaceName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'Namespace Name',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `AppId_ClusterName_NamespaceName` (`AppId`(191),`ClusterName`(191),`NamespaceName`(191)),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_NamespaceName` (`NamespaceName`(191))
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='命名空间';



      # Dump of table namespacelock
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `NamespaceLock`;

      CREATE TABLE `NamespaceLock` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增id',
        `NamespaceId` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '集群NamespaceId',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT 'default' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        `IsDeleted` bit(1) DEFAULT b'0' COMMENT '软删除',
        PRIMARY KEY (`Id`),
        UNIQUE KEY `IX_NamespaceId` (`NamespaceId`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='namespace的编辑锁';



      # Dump of table release
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Release`;

      CREATE TABLE `Release` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增主键',
        `ReleaseKey` varchar(64) NOT NULL DEFAULT '' COMMENT '发布的Key',
        `Name` varchar(64) NOT NULL DEFAULT 'default' COMMENT '发布名字',
        `Comment` varchar(256) DEFAULT NULL COMMENT '发布说明',
        `AppId` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'ClusterName',
        `NamespaceName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'namespaceName',
        `Configurations` longtext NOT NULL COMMENT '发布配置',
        `IsAbandoned` bit(1) NOT NULL DEFAULT b'0' COMMENT '是否废弃',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `AppId_ClusterName_GroupName` (`AppId`(191),`ClusterName`(191),`NamespaceName`(191)),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_ReleaseKey` (`ReleaseKey`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='发布';


      # Dump of table releasehistory
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `ReleaseHistory`;

      CREATE TABLE `ReleaseHistory` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `AppId` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'ClusterName',
        `NamespaceName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'namespaceName',
        `BranchName` varchar(32) NOT NULL DEFAULT 'default' COMMENT '发布分支名',
        `ReleaseId` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '关联的Release Id',
        `PreviousReleaseId` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '前一次发布的ReleaseId',
        `Operation` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT '发布类型，0: 普通发布，1: 回滚，2: 灰度发布，3: 灰度规则更新，4: 灰度合并回主分支发布，5: 主分支发布灰度自动发布，6: 主分支回滚灰度自动发布，7: 放弃灰度',
        `OperationContext` longtext NOT NULL COMMENT '发布上下文信息',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_Namespace` (`AppId`,`ClusterName`,`NamespaceName`,`BranchName`),
        KEY `IX_ReleaseId` (`ReleaseId`),
        KEY `IX_DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='发布历史';


      # Dump of table releasemessage
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `ReleaseMessage`;

      CREATE TABLE `ReleaseMessage` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增主键',
        `Message` varchar(1024) NOT NULL DEFAULT '' COMMENT '发布的消息内容',
        `DataChange_LastTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_Message` (`Message`(191))
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='发布消息';



      # Dump of table serverconfig
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `ServerConfig`;

      CREATE TABLE `ServerConfig` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `Key` varchar(64) NOT NULL DEFAULT 'default' COMMENT '配置项Key',
        `Cluster` varchar(32) NOT NULL DEFAULT 'default' COMMENT '配置对应的集群，default为不针对特定的集群',
        `Value` varchar(2048) NOT NULL DEFAULT 'default' COMMENT '配置项值',
        `Comment` varchar(1024) DEFAULT '' COMMENT '注释',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_Key` (`Key`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='配置服务自身配置';

      # Config
      # ------------------------------------------------------------
      INSERT INTO `ServerConfig` (`Key`, `Cluster`, `Value`, `Comment`)      VALUES          ('eureka.service.url', 'default', 'http://apollo-uatconfigservice:8080/eureka/', 'Eureka服务Url，多个service以英文逗号分隔'),
          ('namespace.lock.switch', 'default', 'false', '一次发布只能有一个人修改开关'),
          ('item.key.length.limit', 'default', '128', 'item key 最大长度限制'),
          ('item.value.length.limit', 'default', '20000', 'item value最大长度限制'),
          ('config-service.cache.enabled', 'default', 'false', 'ConfigService是否开启缓存，开启后能提高性能，但是会增大内存消耗！');

      /*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;
      /*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
      /*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
      /*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
      /*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
      /*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;


proconfigservicemysql:
  enabled: true
  mysqlUser: "admin"
  mysqlPassword: "admin"
  # mysqlUser: "root"
  # mysqlPassword: "123456"
  mysqlRootPassword: "123456"
  mysqlDatabase: "ApolloConfigDB"
  ## Persist data to a persistent volume
  persistence:
    ## database data Persistent Volume Storage Class
    ## If defined, storageClassName: <storageClass>
    ## If set to "-", storageClassName: "", which disables dynamic provisioning
    ## If undefined (the default) or set to null, no storageClassName spec is
    ##   set, choosing the default provisioner.  (gp2 on AWS, standard on
    ##   GKE, AWS & OpenStack)
    ##
    # storageClass: "-"
    accessMode: ReadWriteOnce
    size: 2Gi
    annotations: {}
  initializationFiles:
    initializationFiles-configservice.sql: |-
      /*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
      /*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
      /*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
      /*!40101 SET NAMES utf8 */;
      /*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
      /*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
      /*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

      # Create Database
      # ------------------------------------------------------------
      CREATE DATABASE IF NOT EXISTS ApolloConfigDB DEFAULT CHARACTER SET = utf8mb4;

      Use ApolloConfigDB;

      # Dump of table app
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `App`;

      CREATE TABLE `App` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
        `AppId` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `Name` varchar(500) NOT NULL DEFAULT 'default' COMMENT '应用名',
        `OrgId` varchar(32) NOT NULL DEFAULT 'default' COMMENT '部门Id',
        `OrgName` varchar(64) NOT NULL DEFAULT 'default' COMMENT '部门名字',
        `OwnerName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'ownerName',
        `OwnerEmail` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'ownerEmail',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `AppId` (`AppId`(191)),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_Name` (`Name`(191))
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='应用表';



      # Dump of table appnamespace
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `AppNamespace`;

      CREATE TABLE `AppNamespace` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增主键',
        `Name` varchar(32) NOT NULL DEFAULT '' COMMENT 'namespace名字，注意，需要全局唯一',
        `AppId` varchar(32) NOT NULL DEFAULT '' COMMENT 'app id',
        `Format` varchar(32) NOT NULL DEFAULT 'properties' COMMENT 'namespace的format类型',
        `IsPublic` bit(1) NOT NULL DEFAULT b'0' COMMENT 'namespace是否为公共',
        `Comment` varchar(64) NOT NULL DEFAULT '' COMMENT '注释',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT '' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_AppId` (`AppId`),
        KEY `Name_AppId` (`Name`,`AppId`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='应用namespace定义';



      # Dump of table audit
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Audit`;

      CREATE TABLE `Audit` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
        `EntityName` varchar(50) NOT NULL DEFAULT 'default' COMMENT '表名',
        `EntityId` int(10) unsigned DEFAULT NULL COMMENT '记录ID',
        `OpName` varchar(50) NOT NULL DEFAULT 'default' COMMENT '操作类型',
        `Comment` varchar(500) DEFAULT NULL COMMENT '备注',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='日志审计表';



      # Dump of table cluster
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Cluster`;

      CREATE TABLE `Cluster` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增主键',
        `Name` varchar(32) NOT NULL DEFAULT '' COMMENT '集群名字',
        `AppId` varchar(32) NOT NULL DEFAULT '' COMMENT 'App id',
        `ParentClusterId` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '父cluster',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT '' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_AppId_Name` (`AppId`,`Name`),
        KEY `IX_ParentClusterId` (`ParentClusterId`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='集群';



      # Dump of table commit
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Commit`;

      CREATE TABLE `Commit` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
        `ChangeSets` longtext NOT NULL COMMENT '修改变更集',
        `AppId` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'ClusterName',
        `NamespaceName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'namespaceName',
        `Comment` varchar(500) DEFAULT NULL COMMENT '备注',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `AppId` (`AppId`(191)),
        KEY `ClusterName` (`ClusterName`(191)),
        KEY `NamespaceName` (`NamespaceName`(191))
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='commit 历史表';

      # Dump of table grayreleaserule
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `GrayReleaseRule`;

      CREATE TABLE `GrayReleaseRule` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
        `AppId` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'Cluster Name',
        `NamespaceName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'Namespace Name',
        `BranchName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'branch name',
        `Rules` varchar(16000) DEFAULT '[]' COMMENT '灰度规则',
        `ReleaseId` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '灰度对应的release',
        `BranchStatus` tinyint(2) DEFAULT '1' COMMENT '灰度分支状态: 0:删除分支,1:正在使用的规则 2：全量发布',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_Namespace` (`AppId`,`ClusterName`,`NamespaceName`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='灰度规则表';


      # Dump of table instance
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Instance`;

      CREATE TABLE `Instance` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `AppId` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'ClusterName',
        `DataCenter` varchar(64) NOT NULL DEFAULT 'default' COMMENT 'Data Center Name',
        `Ip` varchar(32) NOT NULL DEFAULT '' COMMENT 'instance ip',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        UNIQUE KEY `IX_UNIQUE_KEY` (`AppId`,`ClusterName`,`Ip`,`DataCenter`),
        KEY `IX_IP` (`Ip`),
        KEY `IX_DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='使用配置的应用实例';



      # Dump of table instanceconfig
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `InstanceConfig`;

      CREATE TABLE `InstanceConfig` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `InstanceId` int(11) unsigned DEFAULT NULL COMMENT 'Instance Id',
        `ConfigAppId` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'Config App Id',
        `ConfigClusterName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'Config Cluster Name',
        `ConfigNamespaceName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'Config Namespace Name',
        `ReleaseKey` varchar(64) NOT NULL DEFAULT '' COMMENT '发布的Key',
        `ReleaseDeliveryTime` timestamp NULL DEFAULT NULL COMMENT '配置获取时间',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        UNIQUE KEY `IX_UNIQUE_KEY` (`InstanceId`,`ConfigAppId`,`ConfigNamespaceName`),
        KEY `IX_ReleaseKey` (`ReleaseKey`),
        KEY `IX_DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_Valid_Namespace` (`ConfigAppId`,`ConfigClusterName`,`ConfigNamespaceName`,`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='应用实例的配置信息';



      # Dump of table item
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Item`;

      CREATE TABLE `Item` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `NamespaceId` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '集群NamespaceId',
        `Key` varchar(128) NOT NULL DEFAULT 'default' COMMENT '配置项Key',
        `Value` longtext NOT NULL COMMENT '配置项值',
        `Comment` varchar(1024) DEFAULT '' COMMENT '注释',
        `LineNum` int(10) unsigned DEFAULT '0' COMMENT '行号',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_GroupId` (`NamespaceId`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='配置项目';



      # Dump of table namespace
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Namespace`;

      CREATE TABLE `Namespace` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增主键',
        `AppId` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'Cluster Name',
        `NamespaceName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'Namespace Name',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `AppId_ClusterName_NamespaceName` (`AppId`(191),`ClusterName`(191),`NamespaceName`(191)),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_NamespaceName` (`NamespaceName`(191))
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='命名空间';



      # Dump of table namespacelock
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `NamespaceLock`;

      CREATE TABLE `NamespaceLock` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增id',
        `NamespaceId` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '集群NamespaceId',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT 'default' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        `IsDeleted` bit(1) DEFAULT b'0' COMMENT '软删除',
        PRIMARY KEY (`Id`),
        UNIQUE KEY `IX_NamespaceId` (`NamespaceId`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='namespace的编辑锁';



      # Dump of table release
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Release`;

      CREATE TABLE `Release` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增主键',
        `ReleaseKey` varchar(64) NOT NULL DEFAULT '' COMMENT '发布的Key',
        `Name` varchar(64) NOT NULL DEFAULT 'default' COMMENT '发布名字',
        `Comment` varchar(256) DEFAULT NULL COMMENT '发布说明',
        `AppId` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'ClusterName',
        `NamespaceName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'namespaceName',
        `Configurations` longtext NOT NULL COMMENT '发布配置',
        `IsAbandoned` bit(1) NOT NULL DEFAULT b'0' COMMENT '是否废弃',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `AppId_ClusterName_GroupName` (`AppId`(191),`ClusterName`(191),`NamespaceName`(191)),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_ReleaseKey` (`ReleaseKey`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='发布';


      # Dump of table releasehistory
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `ReleaseHistory`;

      CREATE TABLE `ReleaseHistory` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `AppId` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `ClusterName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'ClusterName',
        `NamespaceName` varchar(32) NOT NULL DEFAULT 'default' COMMENT 'namespaceName',
        `BranchName` varchar(32) NOT NULL DEFAULT 'default' COMMENT '发布分支名',
        `ReleaseId` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '关联的Release Id',
        `PreviousReleaseId` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '前一次发布的ReleaseId',
        `Operation` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT '发布类型，0: 普通发布，1: 回滚，2: 灰度发布，3: 灰度规则更新，4: 灰度合并回主分支发布，5: 主分支发布灰度自动发布，6: 主分支回滚灰度自动发布，7: 放弃灰度',
        `OperationContext` longtext NOT NULL COMMENT '发布上下文信息',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_Namespace` (`AppId`,`ClusterName`,`NamespaceName`,`BranchName`),
        KEY `IX_ReleaseId` (`ReleaseId`),
        KEY `IX_DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='发布历史';


      # Dump of table releasemessage
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `ReleaseMessage`;

      CREATE TABLE `ReleaseMessage` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增主键',
        `Message` varchar(1024) NOT NULL DEFAULT '' COMMENT '发布的消息内容',
        `DataChange_LastTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_Message` (`Message`(191))
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='发布消息';



      # Dump of table serverconfig
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `ServerConfig`;

      CREATE TABLE `ServerConfig` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `Key` varchar(64) NOT NULL DEFAULT 'default' COMMENT '配置项Key',
        `Cluster` varchar(32) NOT NULL DEFAULT 'default' COMMENT '配置对应的集群，default为不针对特定的集群',
        `Value` varchar(2048) NOT NULL DEFAULT 'default' COMMENT '配置项值',
        `Comment` varchar(1024) DEFAULT '' COMMENT '注释',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_Key` (`Key`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='配置服务自身配置';

      # Config
      # ------------------------------------------------------------
      INSERT INTO `ServerConfig` (`Key`, `Cluster`, `Value`, `Comment`)      VALUES          ('eureka.service.url', 'default', 'http://apollo-proconfigservice:8080/eureka/', 'Eureka服务Url，多个service以英文逗号分隔'),
          ('namespace.lock.switch', 'default', 'false', '一次发布只能有一个人修改开关'),
          ('item.key.length.limit', 'default', '128', 'item key 最大长度限制'),
          ('item.value.length.limit', 'default', '20000', 'item value最大长度限制'),
          ('config-service.cache.enabled', 'default', 'false', 'ConfigService是否开启缓存，开启后能提高性能，但是会增大内存消耗！');

      /*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;
      /*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
      /*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
      /*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
      /*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
      /*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;


portalmysql:
  enabled: true
  mysqlUser: "admin"
  mysqlPassword: "admin"
  # mysqlUser: "root"
  # mysqlPassword: "123456"
  mysqlRootPassword: "123456"
  mysqlDatabase: "ApolloPortalDB"
  ## Persist data to a persistent volume
  persistence:
    ## database data Persistent Volume Storage Class
    ## If defined, storageClassName: <storageClass>
    ## If set to "-", storageClassName: "", which disables dynamic provisioning
    ## If undefined (the default) or set to null, no storageClassName spec is
    ##   set, choosing the default provisioner.  (gp2 on AWS, standard on
    ##   GKE, AWS & OpenStack)
    ##
    # storageClass: "-"
    accessMode: ReadWriteOnce
    size: 2Gi
    annotations: {}
  initializationFiles:
    initializationFiles-portaldb.sql: |-
      /*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
      /*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
      /*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
      /*!40101 SET NAMES utf8 */;
      /*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
      /*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
      /*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

      # Create Database
      # ------------------------------------------------------------
      CREATE DATABASE IF NOT EXISTS ApolloPortalDB DEFAULT CHARACTER SET = utf8mb4;
            Use ApolloPortalDB;

      # Dump of table app
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `App`;

      CREATE TABLE `App` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
        `AppId` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `Name` varchar(500) NOT NULL DEFAULT 'default' COMMENT '应用名',
        `OrgId` varchar(32) NOT NULL DEFAULT 'default' COMMENT '部门Id',
        `OrgName` varchar(64) NOT NULL DEFAULT 'default' COMMENT '部门名字',
        `OwnerName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'ownerName',
        `OwnerEmail` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'ownerEmail',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `AppId` (`AppId`(191)),
        KEY `DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_Name` (`Name`(191))
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='应用表';



      # Dump of table appnamespace
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `AppNamespace`;

      CREATE TABLE `AppNamespace` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增主键',
        `Name` varchar(32) NOT NULL DEFAULT '' COMMENT 'namespace名字，注意，需要全局唯一',
        `AppId` varchar(32) NOT NULL DEFAULT '' COMMENT 'app id',
        `Format` varchar(32) NOT NULL DEFAULT 'properties' COMMENT 'namespace的format类型',
        `IsPublic` bit(1) NOT NULL DEFAULT b'0' COMMENT 'namespace是否为公共',
        `Comment` varchar(64) NOT NULL DEFAULT '' COMMENT '注释',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT '' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_AppId` (`AppId`),
        KEY `Name_AppId` (`Name`,`AppId`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='应用namespace定义';



      # Dump of table consumer
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Consumer`;

      CREATE TABLE `Consumer` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `AppId` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `Name` varchar(500) NOT NULL DEFAULT 'default' COMMENT '应用名',
        `OrgId` varchar(32) NOT NULL DEFAULT 'default' COMMENT '部门Id',
        `OrgName` varchar(64) NOT NULL DEFAULT 'default' COMMENT '部门名字',
        `OwnerName` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'ownerName',
        `OwnerEmail` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'ownerEmail',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `AppId` (`AppId`(191)),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='开放API消费者';



      # Dump of table consumeraudit
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `ConsumerAudit`;

      CREATE TABLE `ConsumerAudit` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `ConsumerId` int(11) unsigned DEFAULT NULL COMMENT 'Consumer Id',
        `Uri` varchar(1024) NOT NULL DEFAULT '' COMMENT '访问的Uri',
        `Method` varchar(16) NOT NULL DEFAULT '' COMMENT '访问的Method',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_ConsumerId` (`ConsumerId`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='consumer审计表';



      # Dump of table consumerrole
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `ConsumerRole`;

      CREATE TABLE `ConsumerRole` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `ConsumerId` int(11) unsigned DEFAULT NULL COMMENT 'Consumer Id',
        `RoleId` int(10) unsigned DEFAULT NULL COMMENT 'Role Id',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) DEFAULT '' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_RoleId` (`RoleId`),
        KEY `IX_ConsumerId_RoleId` (`ConsumerId`,`RoleId`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='consumer和role的绑定表';



      # Dump of table consumertoken
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `ConsumerToken`;

      CREATE TABLE `ConsumerToken` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `ConsumerId` int(11) unsigned DEFAULT NULL COMMENT 'ConsumerId',
        `Token` varchar(128) NOT NULL DEFAULT '' COMMENT 'token',
        `Expires` datetime NOT NULL DEFAULT '2099-01-01 00:00:00' COMMENT 'token失效时间',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        UNIQUE KEY `IX_Token` (`Token`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='consumer token表';

      # Dump of table favorite
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Favorite`;

      CREATE TABLE `Favorite` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
        `UserId` varchar(32) NOT NULL DEFAULT 'default' COMMENT '收藏的用户',
        `AppId` varchar(500) NOT NULL DEFAULT 'default' COMMENT 'AppID',
        `Position` int(32) NOT NULL DEFAULT '10000' COMMENT '收藏顺序',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `AppId` (`AppId`(191)),
        KEY `IX_UserId` (`UserId`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB AUTO_INCREMENT=23 DEFAULT CHARSET=utf8mb4 COMMENT='应用收藏表';

      # Dump of table permission
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Permission`;

      CREATE TABLE `Permission` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `PermissionType` varchar(32) NOT NULL DEFAULT '' COMMENT '权限类型',
        `TargetId` varchar(256) NOT NULL DEFAULT '' COMMENT '权限对象类型',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT '' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_TargetId_PermissionType` (`TargetId`(191),`PermissionType`),
        KEY `IX_DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='permission表';



      # Dump of table role
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Role`;

      CREATE TABLE `Role` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `RoleName` varchar(256) NOT NULL DEFAULT '' COMMENT 'Role name',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_RoleName` (`RoleName`(191)),
        KEY `IX_DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='角色表';



      # Dump of table rolepermission
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `RolePermission`;

      CREATE TABLE `RolePermission` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `RoleId` int(10) unsigned DEFAULT NULL COMMENT 'Role Id',
        `PermissionId` int(10) unsigned DEFAULT NULL COMMENT 'Permission Id',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) DEFAULT '' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_RoleId` (`RoleId`),
        KEY `IX_PermissionId` (`PermissionId`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='角色和权限的绑定表';



      # Dump of table serverconfig
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `ServerConfig`;

      CREATE TABLE `ServerConfig` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `Key` varchar(64) NOT NULL DEFAULT 'default' COMMENT '配置项Key',
        `Value` varchar(2048) NOT NULL DEFAULT 'default' COMMENT '配置项值',
        `Comment` varchar(1024) DEFAULT '' COMMENT '注释',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) NOT NULL DEFAULT 'default' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_Key` (`Key`),
        KEY `DataChange_LastTime` (`DataChange_LastTime`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='配置服务自身配置';



      # Dump of table userrole
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `UserRole`;

      CREATE TABLE `UserRole` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `UserId` varchar(128) DEFAULT '' COMMENT '用户身份标识',
        `RoleId` int(10) unsigned DEFAULT NULL COMMENT 'Role Id',
        `IsDeleted` bit(1) NOT NULL DEFAULT b'0' COMMENT '1: deleted, 0: normal',
        `DataChange_CreatedBy` varchar(32) DEFAULT '' COMMENT '创建人邮箱前缀',
        `DataChange_CreatedTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        `DataChange_LastModifiedBy` varchar(32) DEFAULT '' COMMENT '最后修改人邮箱前缀',
        `DataChange_LastTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '最后修改时间',
        PRIMARY KEY (`Id`),
        KEY `IX_DataChange_LastTime` (`DataChange_LastTime`),
        KEY `IX_RoleId` (`RoleId`),
        KEY `IX_UserId_RoleId` (`UserId`,`RoleId`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='用户和role的绑定表';

      # Dump of table Users
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Users`;

      CREATE TABLE `Users` (
        `Id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `Username` varchar(64) NOT NULL DEFAULT 'default' COMMENT '用户名',
        `Password` varchar(64) NOT NULL DEFAULT 'default' COMMENT '密码',
        `Email` varchar(64) NOT NULL DEFAULT 'default' COMMENT '邮箱地址',
        `Enabled` tinyint(4) DEFAULT NULL COMMENT '是否有效',
        PRIMARY KEY (`Id`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='用户表';


      # Dump of table Authorities
      # ------------------------------------------------------------

      DROP TABLE IF EXISTS `Authorities`;

      CREATE TABLE `Authorities` (
        `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
        `Username` varchar(64) NOT NULL,
        `Authority` varchar(50) NOT NULL,
        PRIMARY KEY (`Id`)
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;


      # Config
      # ------------------------------------------------------------
      INSERT INTO `ServerConfig` (`Key`, `Value`, `Comment`)
      VALUES
          ('apollo.portal.envs', 'dev, fat, uat, pro', '可支持的环境列表'),
          ('organizations', '[{\"orgId\":\"TEST1\",\"orgName\":\"样例部门1\"},{\"orgId\":\"TEST2\",\"orgName\":\"样例部门2\"}]', '部门列表'),
          ('superAdmin', 'apollo', 'Portal超级管理员'),
          ('api.readTimeout', '10000', 'http接口read timeout'),
          ('consumer.token.salt', 'someSalt', 'consumer token salt'),
          ('admin.createPrivateNamespace.switch', 'true', '是否允许项目管理员创建私有namespace'),
          ('configView.memberOnly.envs', 'pro', '只对项目成员显示配置信息的环境列表，多个env以英文逗号分隔');

      INSERT INTO `Users` (`Username`, `Password`, `Email`, `Enabled`)
      VALUES
      	('apollo', '$2a$10$7r20uS.BQ9uBpf3Baj3uQOZvMVvB1RN3PYoKE94gtz2.WAOuiiwXS', 'apollo@admin.com', 1);

      INSERT INTO `Authorities` (`Username`, `Authority`) VALUES ('apollo', 'ROLE_user');

      /*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;
      /*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
      /*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
      /*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
      /*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
      /*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;

